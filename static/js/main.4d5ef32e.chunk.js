(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(21)},15:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(8),r=n.n(a),s=(n(15),n(1)),l=n(2),c=n(4),u=n(3),d=n(5),p=n(9),g=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("aside",{id:"sidebar"},i.a.createElement("label",null,"Filter: ",i.a.createElement(p.DebounceInput,{debounceTimeout:500,placeholder:"Type your query",onChange:function(t){e.props.filterVenues(t.target.value)},value:this.props.query})),i.a.createElement("ul",{"aria-label":"Nearby Venues' List",tabIndex:"0",id:"side-list"},this.props.filteredVenues.map(function(t,n){return i.a.createElement("li",{tabIndex:"0","aria-posinset":n+1,"aria-setsize":e.props.filteredVenues.length,key:t.venue.id,onClick:function(){return e.props.clickList(t)},onKeyPress:function(n){e.props.listKeyPress(n,t)}},i.a.createElement("h3",null,i.a.createElement("strong",null,t.venue.name)),i.a.createElement("span",null,t.venue.categories[0].name))})))}}]),t}(o.Component),m=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("nav",{id:"navbar"},i.a.createElement("h1",null,"Neighbourhood Map"),i.a.createElement("div",{tabIndex:"0",role:"button",id:"toggle-nav",onClick:function(){e.props.toggleSidebar(e.props.toggleVal)},onKeyPress:function(t){e.props.navKeyPress(t,e.props.toggleVal)}},this.props.toggleVal?i.a.createElement("span",{role:"button","aria-label":"open",title:"Tap to open sidebar"},"\u2630"):i.a.createElement("span",{role:"button","aria-label":"close",title:"Tap to close sidebar"},"\u2718")))}}]),t}(o.Component),f=(n(19),function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={venues:[],markers:[],filteredVenues:[],query:"",toggleVal:!0},n.toggleSidebar=function(e){n.setState({toggleVal:!e}),n.state.toggleVal?(window.document.getElementById("sidebar").style.left="0px",window.document.getElementById("sidebar").style.visibility="visible"):(window.document.getElementById("sidebar").style.left="-400px",window.document.getElementById("sidebar").style.visibility="hidden")},n.navKeyPress=function(e,t){13===(e.keyCode||e.which)&&n.toggleSidebar(t)},n.listKeyPress=function(e,t){13===(e.keyCode||e.which)&&n.clickList(t)},n.loadMap=function(){window.initMap=n.initMap;var e=window.document.getElementsByTagName("script")[0],t=window.document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyB9ggWWErnMrBBV2581LSTZVWxhB7BbylQ&callback=initMap",t.async=!0,t.defer=!0,e.parentNode.insertBefore(t,e)},n.filterVenues=function(e){e=e.trim(),n.setState({query:e,filteredVenues:e?n.state.venues.filter(function(t){return t.venue.name.toLowerCase().includes(e.toLowerCase())}):n.state.venues},function(){return console.log("Showing ",n.state.filteredVenues.length," places.")}),n.state.markers.forEach(function(t){t.title.toLowerCase().includes(e.toLowerCase())?t.setVisible(!0):t.setVisible(!1)})},n.getNearbyVenues=function(){window.fetch("https://api.foursquare.com/v2/venues/explore?client_id=LRQXKPJ21ZWDLMSIF0A3QI2H23EBUFZM2WE0WTHL2CMIILBC&client_secret=NAHU30SNZJMVDM2SBG33ZTVAP1K5LBUJOKTSH3PDTI4KCHNI&v=20180323&near=hyderabad").then(function(e){return e.json()}).then(function(e){n.setState({venues:e.response.groups[0].items,filteredVenues:e.response.groups[0].items},function(){return console.log("Showing ",n.state.filteredVenues.length," places.")}),n.loadMap()}).catch(function(e){console.log(e)})},n.initMap=function(){var e,t=new window.google.maps.LatLngBounds,o=new window.google.maps.InfoWindow,i=new window.google.maps.Map(document.getElementById("map"),{center:{lat:17.422316,lng:78.4741774},zoom:14});console.log(n.state.venues),e=n.state.venues.map(function(e){var n=new window.google.maps.Marker({position:{lat:e.venue.location.lat,lng:e.venue.location.lng},map:i,animation:window.google.maps.Animation.DROP,title:e.venue.name,id:e.venue.id});return n.addListener("click",function(){n.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){n.setAnimation(null)},1e3),function(e,t,n){var o=new window.google.maps.StreetViewService;o.getPanoramaByLocation(e.position,50,function(o,i){if(i===window.google.maps.StreetViewStatus.OK){var a=o.location.latLng,r=window.google.maps.geometry.spherical.computeHeading(a,e.position);t.setContent("<div><h4>"+n.venue.name+"</h4><p>"+n.venue.location.formattedAddress.join("<br>")+'</p></div><div id="pano"></div>');var s={position:a,pov:{heading:r,pitch:30}};new window.google.maps.StreetViewPanorama(window.document.getElementById("pano"),s)}else t.setContent("<div><h4>"+n.venue.name+"</h4><p>"+n.venue.location.formattedAddress.join("<br>")+"</p></div>")}),i.setZoom(15),i.setCenter(e.position),t.open(i,e)}(n,o,e)}),t.extend(n.position),n}),n.setState({markers:e}),i.fitBounds(t),window.google.maps.event.addDomListener(window,"resize",function(){i.fitBounds(t)})},n.clickList=function(e){var t=n.state.markers.filter(function(t){return t.id===e.venue.id})[0];window.google.maps.event.trigger(t,"click")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getNearbyVenues()}},{key:"render",value:function(){return i.a.createElement("div",{id:"app-container","aria-label":"Neighbourhood Map Application"},i.a.createElement(m,{toggleSidebar:this.toggleSidebar,toggleVal:this.state.toggleVal,navKeyPress:this.navKeyPress}),i.a.createElement(g,{filterVenues:this.filterVenues,filteredVenues:this.state.filteredVenues,clickList:this.clickList,query:this.state.query,listKeyPress:this.listKeyPress}),i.a.createElement("main",null,i.a.createElement("div",{role:"application","aria-label":"Map showing nearby venues",id:"map"})))}}]),t}(o.Component));r.a.render(i.a.createElement(f,null),document.getElementById("root")),navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("ServiceWorker Successfully Registered")}).catch(function(e){console.error(e),console.log("ServiceWorker Not Registered")})}},[[10,2,1]]]);
//# sourceMappingURL=main.4d5ef32e.chunk.js.map